{
    "query": "(SELECT * FROM (SELECT *, 'name' AS matched_in, 0 AS total_matched_reviews, NULL AS matched_review_sample FROM accommodation_facility WHERE $1 UNION SELECT *, 'tags' AS matched_in, 0 AS total_matched_reviews, NULL AS matched_review_sample FROM accommodation_facility WHERE $2 UNION SELECT accommodation_facility.accommodation_facility_id, accommodation_facility.NAME, accommodation_facility.type, accommodation_facility.country, accommodation_facility.administrative_area_level_1, accommodation_facility.administrative_area_level_2, accommodation_facility.administrative_area_level_3, accommodation_facility.locality, accommodation_facility.address, accommodation_facility.email, accommodation_facility.website, accommodation_facility.phone, accommodation_facility.description, accommodation_facility.latitude, accommodation_facility.longitude, accommodation_facility.rating, accommodation_facility.total_favorites, accommodation_facility.total_views, accommodation_facility.total_reviews, accommodation_facility.total_images, accommodation_facility.tags, 'review' AS matched_in, ( SELECT Count(*) FROM review WHERE review.accommodation_facility_id = accommodation_facility.accommodation_facility_id AND review.status = 'approved' AND $3) AS total_matched_reviews, ( SELECT Concat(review.title, ': ', review.description) FROM review WHERE review.accommodation_facility_id = accommodation_facility.accommodation_facility_id AND review.status = 'approved' AND $3 limit 1) AS matched_review_sample FROM accommodation_facility JOIN review using (accommodation_facility_id) WHERE review.accommodation_facility_id = accommodation_facility.accommodation_facility_id AND review.status = 'approved' AND $3) AS accommodation_facility GROUP BY accommodation_facility.accommodation_facility_id) AS accommodation_facility"
}


